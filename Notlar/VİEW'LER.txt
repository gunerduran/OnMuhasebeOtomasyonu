----VW_KASAHAREKETLERI

SELECT        dbo.TBL_KASAHAREKETLERI.KASAID, dbo.TBL_KASAHAREKETLERI.ID, dbo.TBL_KASAHAREKETLERI.CARIID, dbo.TBL_KASALAR.KASAKODU, dbo.TBL_KASALAR.KASAADI, dbo.TBL_CARILER.CARIKODU, 
                         dbo.TBL_CARILER.CARIADI, dbo.TBL_KASAHAREKETLERI.BELGENO, dbo.TBL_KASAHAREKETLERI.EVRAKTURU, dbo.TBL_KASAHAREKETLERI.EVRAKID, dbo.TBL_KASAHAREKETLERI.TARIH, 
                         (CASE WHEN dbo.TBL_KASAHAREKETLERI.GCKODU = 'G' THEN dbo.TBL_KASAHAREKETLERI.TUTAR ELSE 0 END) AS GIRIS, 
                         (CASE WHEN dbo.TBL_KASAHAREKETLERI.GCKODU = 'C' THEN dbo.TBL_KASAHAREKETLERI.TUTAR ELSE 0 END) AS CIKIS, dbo.TBL_KASAHAREKETLERI.ACIKLAMA
FROM            dbo.TBL_KASAHAREKETLERI LEFT OUTER JOIN
                         dbo.TBL_KASALAR ON dbo.TBL_KASAHAREKETLERI.KASAID = dbo.TBL_KASALAR.ID LEFT OUTER JOIN
                         dbo.TBL_CARILER ON dbo.TBL_KASAHAREKETLERI.CARIID = dbo.TBL_CARILER.ID



----VW_KASADURUM
SELECT        KASAID, SUM(CASE WHEN GCKODU = 'G' THEN TUTAR ELSE 0 END) AS GIRIS, SUM(CASE WHEN GCKODU = 'C' THEN TUTAR ELSE 0 END) AS CIKIS, SUM(CASE WHEN GCKODU = 'G' THEN TUTAR ELSE 0 END) 
                         - SUM(CASE WHEN GCKODU = 'C' THEN TUTAR ELSE 0 END) AS BAKIYE
FROM            dbo.TBL_KASAHAREKETLERI
GROUP BY KASAID


--linq to sql view kullanýmý

  var lst = from s in DB.VW_KASAHAREKETLERIs //view'i kullandýk
                      where s.KASAID == KasaID
                      select s;
            Liste.DataSource = lst;


        void DurumGetir()
        {
            Fonksiyonlar.VW_KASADURUM Kasa = DB.VW_KASADURUMs.First(s=>s.KASAID==KasaID);
            txtGiris.Text=Kasa.GIRIS.Value.ToString();
            txtCikis.Text=Kasa.CIKIS.Value.ToString();
            txtBakiye.Text = Kasa.BAKIYE.Value.ToString();
        }


---VW_KASALISTESI(CASE WHEN KULLANDIK)
SELECT        dbo.TBL_KASALAR.ID, dbo.TBL_KASALAR.KASAKODU, dbo.TBL_KASALAR.KASAADI, dbo.TBL_KASALAR.ACIKLAMA, (CASE WHEN dbo.VW_KASADURUM.GIRIS IS NULL 
                         THEN 0 ELSE dbo.VW_KASADURUM.GIRIS END) AS GIRIS, (CASE WHEN dbo.VW_KASADURUM.CIKIS IS NULL THEN 0 ELSE dbo.VW_KASADURUM.CIKIS END) AS CIKIS, 
                         (CASE WHEN dbo.VW_KASADURUM.BAKIYE IS NULL THEN 0 ELSE dbo.VW_KASADURUM.BAKIYE END) AS BAKIYE
FROM            dbo.TBL_KASALAR LEFT OUTER JOIN
                         dbo.VW_KASADURUM ON dbo.TBL_KASALAR.ID = dbo.VW_KASADURUM.KASAID



------VW_BANKAHAREKETLERI (CASE WHEN KULLANDIK)
SELECT        dbo.TBL_BANKAHAREKETLERI.ID, dbo.TBL_BANKAHAREKETLERI.BANKAID, dbo.TBL_BANKAHAREKETLERI.CARIID, dbo.TBL_BANKAHAREKETLERI.BELGENO, dbo.TBL_BANKAHAREKETLERI.TARIH, 
                         dbo.TBL_BANKAHAREKETLERI.EVRAKTURU, dbo.TBL_BANKAHAREKETLERI.EVRAKID, dbo.TBL_BANKAHAREKETLERI.TUTAR, dbo.TBL_BANKAHAREKETLERI.ACIKLAMA, 
                         (CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'G' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) AS GIRIS, 
                         (CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'C' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) AS CIKIS, dbo.TBL_BANKALAR.HESAPADI, dbo.TBL_BANKALAR.HESAPNO
FROM            dbo.TBL_BANKAHAREKETLERI LEFT OUTER JOIN
                         dbo.TBL_BANKALAR ON dbo.TBL_BANKAHAREKETLERI.BANKAID = dbo.TBL_BANKALAR.ID


----VW_BANKADURUM(CASE WHEN KULLANDIK)
SELECT        dbo.TBL_BANKALAR.ID, SUM(CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'G' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) AS GIRIS, 
                         SUM(CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'C' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) AS CIKIS, 
                         SUM(CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'G' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) 
                         - SUM(CASE WHEN dbo.TBL_BANKAHAREKETLERI.GCKODU = 'C' THEN dbo.TBL_BANKAHAREKETLERI.TUTAR ELSE 0 END) AS BAKIYE
FROM            dbo.TBL_BANKALAR LEFT OUTER JOIN
                         dbo.TBL_BANKAHAREKETLERI ON dbo.TBL_BANKALAR.ID = dbo.TBL_BANKAHAREKETLERI.BANKAID
GROUP BY dbo.TBL_BANKALAR.ID


----VW_BANKALISTESI

SELECT        dbo.TBL_BANKALAR.ID, dbo.TBL_BANKALAR.HESAPNO, dbo.TBL_BANKALAR.IBAN, dbo.TBL_BANKALAR.BANKAADI, dbo.TBL_BANKALAR.HESAPADI, dbo.VW_BANKADURUM.GIRIS, 
                         dbo.VW_BANKADURUM.CIKIS, dbo.VW_BANKADURUM.BAKIYE
FROM            dbo.VW_BANKADURUM RIGHT OUTER JOIN
                         dbo.TBL_BANKALAR ON dbo.VW_BANKADURUM.ID = dbo.TBL_BANKALAR.ID
